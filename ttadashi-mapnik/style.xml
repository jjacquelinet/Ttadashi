<Mapnik xmlns="http://mapnik.org/schema/3.0">
  
  <!-- Définition des styles -->
  
  <!-- Style pour les fonds de carte -->
  <Style name="background">
    <Rule>
      <PolygonSymbolizer fill="#f2efe9"/>
    </Rule>
  </Style>

  <!-- Style pour les routes -->
  <Style name="roads">
    <Rule>
      <LineSymbolizer stroke="black" stroke-width="2" />
    </Rule>
  </Style>

  <!-- Style pour les bâtiments -->
  <Style name="buildings">
    <Rule>
      <PolygonSymbolizer fill="#d3d3d3" />
      <LineSymbolizer stroke="black" stroke-width="0.5" />
    </Rule>
  </Style>

  <!-- Définition des couches -->

  <!-- Fond de carte -->
  <Layer name="land" srs="+init=epsg:3857">
    <StyleName>background</StyleName>
    <Datasource>
      <Parameter name="type">postgis</Parameter>
      <Parameter name="host">localhost</Parameter> <!-- Remplace par ton IP ou domaine -->
      <Parameter name="dbname">gis</Parameter>  <!-- Nom de ta base -->
      <Parameter name="user">user</Parameter>  <!-- Nom d'utilisateur -->
      <Parameter name="password">password</Parameter>  <!-- Mot de passe -->
      <Parameter name="table">(SELECT geom FROM land_polygons) AS land</Parameter>
      <Parameter name="geometry_field">geom</Parameter>
      <Parameter name="srid">3857</Parameter>
    </Datasource>
  </Layer>

  <!-- Routes -->
  <Layer name="roads" srs="+init=epsg:3857">
    <StyleName>roads</StyleName>
    <Datasource>
      <Parameter name="type">postgis</Parameter>
      <Parameter name="host">localhost</Parameter>
      <Parameter name="dbname">gis</Parameter>
      <Parameter name="user">user</Parameter>
      <Parameter name="password">password</Parameter>
      <Parameter name="table">(SELECT geom FROM roads WHERE highway IS NOT NULL) AS roads</Parameter>
      <Parameter name="geometry_field">geom</Parameter>
      <Parameter name="srid">3857</Parameter>
    </Datasource>
  </Layer>

  <!-- Bâtiments -->
  <Layer name="buildings" srs="+init=epsg:3857">
    <StyleName>buildings</StyleName>
    <Datasource>
      <Parameter name="type">postgis</Parameter>
      <Parameter name="host">localhost</Parameter>
      <Parameter name="dbname">gis</Parameter>
      <Parameter name="user">user</Parameter>
      <Parameter name="password">password</Parameter>
      <Parameter name="table">(SELECT geom FROM buildings) AS buildings</Parameter>
      <Parameter name="geometry_field">geom</Parameter>
      <Parameter name="srid">3857</Parameter>
    </Datasource>
  </Layer>

</Mapnik>
